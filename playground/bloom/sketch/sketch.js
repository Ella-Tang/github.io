const _0xd5d4cb=_0x128a;function _0x128a(_0x560f56,_0xb06ba1){const _0x5a0335=_0x5a03();return _0x128a=function(_0x128aee,_0x32519e){_0x128aee=_0x128aee-0x1cc;let _0x31bec1=_0x5a0335[_0x128aee];return _0x31bec1;},_0x128a(_0x560f56,_0xb06ba1);}(function(_0xcd7b1f,_0x8b4390){const _0x1a6532=_0x128a,_0x40177f=_0xcd7b1f();while(!![]){try{const _0x3f478b=-parseInt(_0x1a6532(0x1ee))/0x1+parseInt(_0x1a6532(0x1f8))/0x2+parseInt(_0x1a6532(0x1d1))/0x3+-parseInt(_0x1a6532(0x1dc))/0x4+-parseInt(_0x1a6532(0x1d9))/0x5+-parseInt(_0x1a6532(0x1d0))/0x6+parseInt(_0x1a6532(0x1f6))/0x7;if(_0x3f478b===_0x8b4390)break;else _0x40177f['push'](_0x40177f['shift']());}catch(_0x478f3d){_0x40177f['push'](_0x40177f['shift']());}}}(_0x5a03,0x32023));const COLOR_PALETTE=[{'r':0x75,'g':0xb9,'b':0xbe,'a':0x1},{'r':0x69,'g':0x6d,'b':0x7d,'a':0x1},{'r':0xd7,'g':0x26,'b':0x38,'a':0x1},{'r':0xf4,'g':0x9d,'b':0x37,'a':0x1},{'r':0xf4,'g':0xc3,'b':0x87,'a':0x1},{'r':0x90,'g':0x40,'b':0x28,'a':0x1},{'r':0x15,'g':0x4c,'b':0x64,'a':0x1},{'r':0x8d,'g':0xa4,'b':0x97,'a':0x1},{'r':0x59,'g':0x87,'b':0x4d,'a':0x1},{'r':0x2e,'g':0x77,'b':0x67,'a':0x1},{'r':0x9c,'g':0xaf,'b':0xb7,'a':0x1},{'r':0x30,'g':0x52,'b':0x52,'a':0x1}];let drawMode=0x2,isDrawing=!0x1,isRandomBg=!0x1,isWebcamAvailable=!0x1,bgm,canvasBg,currBgColor,video,handPose,hands=[],flowers=[],selectedFlower=null,minDistanceBetween=Math[_0xd5d4cb(0x1e9)](window[_0xd5d4cb(0x1f1)],window[_0xd5d4cb(0x1f4)])/0xc,timeThreshold=0x7d0,handTimer=null,heldElement=null,textureLayer;function preload(){const _0x31427b=_0xd5d4cb;bgm=loadSound(_0x31427b(0x1fb)),handPose=ml5[_0x31427b(0x1cf)]({'flipped':!0x0});}function setup(){createCanvas(windowWidth,windowHeight),textureLayer=createGraphics(windowWidth,windowHeight),initHandDetection(),initTexture(),canvasBg=color(0xd7,0xd0,0xc8),currBgColor=canvasBg;}function draw(){background(currBgColor),drawMode==0x1?(updatebyHand(),showHandInd()):updatebyMouse(mouseX,mouseY),drawFlowers(),image(textureLayer,0x0,0x0);}function updatebyMouse(_0x4b3530,_0x479f5b){const _0x2a4d52=_0xd5d4cb,_0x562558=mouseIsPressed||touches[_0x2a4d52(0x1d8)]>0x0;isDrawing&&inDrawingArea({'x':_0x4b3530,'y':_0x479f5b})&&_0x562558&&!flowerCreated&&!isFlowerSelected({'x':_0x4b3530,'y':_0x479f5b})&&(createNewFlower({'x':_0x4b3530,'y':_0x479f5b}),flowerCreated=!0x0,clearSelectedMark());}function mouseReleased(){flowerCreated=!0x1;}function touchEnded(){flowerCreated=!0x1;}function updatebyHand(){const _0x13708e=_0xd5d4cb;let _0xfd0a1=getHandPos();if(_0xfd0a1){if(isDrawing&&inDrawingArea(_0xfd0a1)){if(handTimer===null)handTimer=new Date()['getTime']();else new Date()[_0x13708e(0x1e8)]()-handTimer>=timeThreshold&&(!isFlowerSelected(_0xfd0a1)&&(createNewFlower(_0xfd0a1),console['log']('New\x20flower\x20created'),handTimer=null));}else{if(isHandOver(clearBtn,_0xfd0a1))updateUIbyHand(clearBtn,clearCanvas);else{if(isHandOver(toggleBtn,_0xfd0a1))updateUIbyHand(toggleBtn,toggleDrawing);else{if(isHandOver(modeBtn,_0xfd0a1))updateUIbyHand(modeBtn,switchDrawingMode);else isHandOver(bgBtn,_0xfd0a1)?updateUIbyHand(bgBtn,switchBg):(handTimer=null,heldElement=null);}}}}else handTimer=null,heldElement=null;}function updateUIbyHand(_0x55713a,_0x5375a3){const _0x44b095=_0xd5d4cb;if(handTimer===null||heldElement!==_0x55713a)handTimer=new Date()[_0x44b095(0x1e8)](),heldElement=_0x55713a,console[_0x44b095(0x1d3)](_0x44b095(0x1f3)+_0x55713a['id']);else new Date()['getTime']()-handTimer>=timeThreshold&&(_0x5375a3(),console['log'](_0x55713a['id']+_0x44b095(0x1fa)),handTimer=null,heldElement=null);}function _0x5a03(){const _0x25083d=['cloned\x20genes','mediaDevices','DevicesNotFoundError','left','An\x20error\x20occurred\x20accessing\x20the\x20webcam:','name','getTime','min','stroke','getUserMedia','confidence','drawFlower','326240nMPaGs','size','rgba(234,227,210,0.1)','innerWidth','startLeaving','Hand\x20on\x20','innerHeight','getBoundingClientRect','7401982cSJfyy','NotFoundError','115104bnbkZN','hide','\x20triggered','lemonade.mp3','gene','then','push','handPose','1760658pJEYhn','732462pmkYuI','A\x20flower\x20is\x20selected','log','splice','line','Unable\x20to\x20create,\x20too\x20close\x20to\x20another','getClone','length','818265LaYMwq','right','background','1483844OgxwGA','top','error','A\x20webcam\x20is\x20required\x20for\x20hand\x20detection','\x20flower(s)\x20now','keydown'];_0x5a03=function(){return _0x25083d;};return _0x5a03();}function isHandOver(_0x50bcd9,_0xb952a2){const _0xe49ba3=_0xd5d4cb,_0x53f02f=_0x50bcd9[_0xe49ba3(0x1f5)]();return _0xb952a2['x']>=_0x53f02f[_0xe49ba3(0x1e5)]&&_0xb952a2['x']<=_0x53f02f[_0xe49ba3(0x1da)]&&_0xb952a2['y']>=_0x53f02f[_0xe49ba3(0x1dd)]&&_0xb952a2['y']<=_0x53f02f['bottom'];}function drawFlowers(){const _0x1eddc6=_0xd5d4cb;let _0x21468f=0x0;while(_0x21468f<flowers[_0x1eddc6(0x1d8)]){flowers[_0x21468f][_0x1eddc6(0x1ed)](),flowers[_0x21468f]['isOffScreen']()?flowers[_0x1eddc6(0x1d4)](_0x21468f,0x1):_0x21468f++;}}function clearFlowers(){flowers=[],selectedFlower=null,clearSelectedMark();}function createNewFlower(_0x40a1cd){const _0x5a780c=_0xd5d4cb;if(isPosValid(_0x40a1cd)){let _0x336432=selectedFlower?selectedFlower[_0x5a780c(0x1cc)][_0x5a780c(0x1d7)]():new Gene(),_0x1c4649=new Flower(_0x40a1cd,_0x336432);flowers[_0x5a780c(0x1ce)](_0x1c4649),console[_0x5a780c(0x1d3)]('A\x20flower\x20created\x20with\x20'+(selectedFlower?_0x5a780c(0x1e2):'random\x20genes')),console[_0x5a780c(0x1d3)]('There\x20are\x20'+flowers[_0x5a780c(0x1d8)]+_0x5a780c(0x1e0)),selectedFlower&&(selectedFlower[_0x5a780c(0x1f2)](),console[_0x5a780c(0x1d3)]('Previously\x20selected\x20flower\x20is\x20leaving')),selectedFlower=null,clearSelectedMark();}}function isFlowerSelected(_0x528cae){const _0xc5bd1c=_0xd5d4cb;for(let _0x201d52 of flowers){if(dist(_0x528cae['x'],_0x528cae['y'],_0x201d52['x'],_0x201d52['y'])<_0x201d52['d']/0x2)return selectedFlower=_0x201d52,showSelectedMark(_0x201d52['x'],_0x201d52['y'],_0x201d52['d']),console['log'](_0xc5bd1c(0x1d2)),!0x0;}return!0x1;}function isPosValid(_0x2d0efc){const _0x59ab53=_0xd5d4cb;for(let _0x3d22ac of flowers){let _0x5d3712=dist(_0x2d0efc['x'],_0x2d0efc['y'],_0x3d22ac['x'],_0x3d22ac['y']);if(_0x5d3712<minDistanceBetween){console[_0x59ab53(0x1d3)](_0x59ab53(0x1d6));if(!selectedFlower)showMsg('Too\x20close\x20to\x20draw,\x20try\x20a\x20different\x20place');return!0x1;}}return!0x0;}function initHandDetection(){const _0x1c8736=_0xd5d4cb;navigator[_0x1c8736(0x1e3)][_0x1c8736(0x1eb)]({'video':!0x0})[_0x1c8736(0x1cd)](function(_0x37b0c1){const _0x479571=_0x1c8736;isWebcamAvailable=!0x0,video=createCapture(VIDEO),video[_0x479571(0x1f9)](),video[_0x479571(0x1ef)](windowWidth,windowHeight),handPose['detectStart'](video,gotHands);})['catch'](function(_0x578db9){const _0x3070c9=_0x1c8736;_0x578db9[_0x3070c9(0x1e7)]===_0x3070c9(0x1f7)||_0x578db9[_0x3070c9(0x1e7)]===_0x3070c9(0x1e4)?(isWebcamAvailable=!0x1,showMsg(_0x3070c9(0x1df))):console[_0x3070c9(0x1de)](_0x3070c9(0x1e6),_0x578db9);});}function gotHands(_0x1041ba){hands=_0x1041ba;}function getHandPos(){const _0x1069a1=_0xd5d4cb;if(hands[_0x1069a1(0x1d8)]>0x0){let _0x5a0778=hands[0x0];if(_0x5a0778[_0x1069a1(0x1ec)]>0.1){let _0x313c3e=_0x5a0778['keypoints'][0x8],_0x41551f=_0x313c3e['x'],_0x1d18dd=_0x313c3e['y'];return{'x':_0x41551f,'y':_0x1d18dd};}}return null;}function initTexture(){const _0x238b7f=_0xd5d4cb;textureLayer[_0x238b7f(0x1db)](0x0,0x0);for(let _0x2debca=0x0;_0x2debca<0x1f40;_0x2debca++){let _0x35c35c=random(width),_0xcf3162=random(height),_0x414c19=noise(_0x35c35c*0.01,_0xcf3162*0.01)*width*0.2;textureLayer[_0x238b7f(0x1ea)](_0x238b7f(0x1f0)),textureLayer[_0x238b7f(0x1d5)](_0x35c35c+_0x414c19/0x2,_0xcf3162,_0x35c35c+_0x414c19/0x2,_0xcf3162+_0x414c19),textureLayer[_0x238b7f(0x1d5)](_0x35c35c,_0xcf3162+_0x414c19/0x2,_0x35c35c+_0x414c19,_0xcf3162+_0x414c19/0x2);}}function windowResized(){resizeCanvas(windowWidth,windowHeight),textureLayer=createGraphics(windowWidth,windowHeight),initTexture();}document['addEventListener'](_0xd5d4cb(0x1e1),function(_0x5f0fae){if(_0x5f0fae['key']==='\x20'){let _0x37053b=fullscreen();fullscreen(!_0x37053b);}});